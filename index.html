<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Beta 3</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <style>
        #field{
            margin-left: 50%;
            transform: translateX(-50%);
            border: 2px solid black;
        }
        html, body{
            overflow-x: hidden;
        }
        .tip{
            padding: 5px; 
            color: white;
        }
        .fwd{
            background-color: #00B050;
        }
        .at{
            background-color: #FF0000;
        }
    </style>
</head>
<body>
    <canvas id="field" width="1300" height="650"></canvas>
    <p class="container">
            <span class="tip fwd">Первая цена FWD</span>
            <span class="tip at">Первая цена AT</span>
    </p>
    <div class="modal fade" id="dataModal">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{ name }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p><strong>Модель:</strong> {{ model }}</p>
                <p><strong>Цена:</strong> {{ price }}&#8381;</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Купить</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
            </div>
            </div>
        </div>
    </div>
    <script src="graphic.js?3"></script>
    <script>
        var app = new Vue({
            el: '#dataModal',
            data: {model: '', name: '', price: ''}
        });
        function show(auto){
            Object.assign(app, auto);
            let modal = new bootstrap.Modal(document.getElementById('dataModal'), {});
            modal.show();
        }
        document.addEventListener("DOMContentLoaded", function(){
            fetch('./data.json')
            .then(response => response.json())
            .then(data => {
                const canvas = document.getElementById('field');
                let gr = new Graphic(canvas, {
                    model_field: 'model',
                    name_field: 'name',
                    price_field: 'price',
                    drive_field: 'drive',
                    unique: true,
                    text_color: '#222222',
                    lines_color: '#AAAAAA',
                    circles_color: '#555555',
                    first_drives: [
                        {drive: 'FWD', color: '#00B050'},
                        {drive: '4WD', color: '#FF0000'}
                    ],
                    radius: 7
                });
                gr.init(data);
                gr.setClickCallback(show);
                gr.draw()
            });
        });
            
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
</body>
</html>